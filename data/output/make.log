make.bat started	
do 23-12-2021		
13:28:20,85		

  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   16.0   Copyright 1985-2019 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Unlimited-user 2-core Stata network license expires 19 May 2022:
       Serial number:  501709312204
         Licensed to:  GIW
                       Tilburg University

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  More than 2 billion observations are allowed; see help obs_advice.
      4.  Maximum number of variables is set to 5000; see help set_maxvar.


running C:\Program Files\Stata16\profile.do ...

. do preclean 

. clear all

. macro drop _all

. 
. program main
  1.         preAmbule
  2.         readBrandFinanceData
  3.         readInterBrandData
  4.         makeCrossWalk
  5.         readNationalAccountData
  6. end

. 
. program preAmbule
  1.         cap log close
  2.         set linesize 250
  3.         version 16
  4. 
.         set matsize 11000
  5.         set more off, permanently
  6. 
.         set seed 12345678
  7.         set sortseed 12345678
  8.         set scheme s2mono
  9.         set type double, permanently 
 10.         adopath + ..\external
 11.         adopath + ..\external\ado
 12.         global locationBrandData "../../raw/brand_value_data"
 13.         global locationNatAccData "../../raw/national_accounts_data"
 14. end 

.         
. program readBrandFinanceData
  1.         import excel using "$locationBrandData/Brands_2007-2021_BrandDirec
> toryCom", firstrow clear
  2.         rename Position rankBrandFinance
  3.         rename Brand nameBrandFinance
  4.         rename BrandValueM valueBrandFinance
  5.         rename Year year
  6.         replace name = strupper(name)
  7.         replace name = strrtrim(name)
  8.         replace name = subinstr(name,".COM", "",.)
  9.         keep year name rank value
 10.         drop if missing(name)
 11.         save ../output/brandFinance.dta, replace        
 12. end

. 
. program readInterBrandData
  1.         import excel using "$locationBrandData/Brands_2007-2021_RankingThe
> Brands", firstrow clear
  2.         rename BrandRank rankInterBrand
  3.         rename BrandNames nameInterBrand
  4.         rename BrandValue valueInterBrand
  5.         replace name = strupper(name)
  6.         replace name = strrtrim(name)
  7.         replace name = subinstr(name,".COM", "",.)
  8.         drop if missing(name)
  9.         save ../output/interBrand.dta, replace  
 10. end

. 
. program makeCrossWalk
  1.         use ../output/brandFinance.dta, clear 
  2.         keep name 
  3.         gen nameBrand = name
  4.         duplicates drop
  5.         save ../output/crossWalk.dta, replace // 
  6.         sleep 500
  7.         use ../output/interBrand.dta, clear // merge to interbrand
  8.         keep name
  9.         duplicates drop
 10.         gen nameBrand = name
 11.         mmerge nameBrand using ../output/crossWalk.dta, type(1:1) 
 12.         sort nameBrand
 13.         duplicates drop
 14.         replace nameBrand = subinstr(nameBrand," GROUP", "",.)
 15.         replace nameBrand = subinstr(nameBrand," (GROUP)", "",.)
 16.         unify_nameBrand // 
 17.         duplicates drop
 18.         save ../output/crossWalk.dta, replace // 
 19. end     

. 
. program unify_nameBrand
  1.         replace nameBrand = "CITI" if nameBrand == "CITIBANK" |nameBrand =
> = "CITIGROUP"  
  2.         replace nameBrand = "COCA COLA" if nameBrand == "COCA-COLA"
  3.         replace nameBrand = "COLGATE" if nameBrand == "COLGATE-PALMOLIVE C
> OMPANY"
  4.         replace nameBrand = "CVS" if nameBrand == "CVS CAREMARK"|nameBrand
>  == "CVS HEALTH"
  5.         replace nameBrand = "DELL" if nameBrand == "DELL EMS"
  6.         replace nameBrand = "DISCOVERY" if nameBrand == "DISCOVERY CHANNEL
> "
  7.         replace nameBrand = "GENERAL ELECTRIC" if nameBrand == "GE"
  8.         replace nameBrand = "HEWLETT-PACKARD" if nameBrand == "HEWLETT PAC
> KARD ENTERPRISE"
  9.         replace nameBrand = "JOHNSON & JOHNSON" if nameBrand == "JOHNSON A
> ND JOHNSON"
 10.         replace nameBrand = "JP MORGAN" if nameBrand == "JPMORGAN"
 11.         replace nameBrand = "MITSUBISHI" if nameBrand == "MITSUBISHI CORPO
> RATION"
 12.         replace nameBrand = "MITSUI" if nameBrand == "MITSUI CONGLOMERATE"
 13.         replace nameBrand = "NESCAFé" if nameBrand == "NESCAFE"
 14.         replace nameBrand = "NESTLé" if nameBrand == "NESTLE"
 15.         replace nameBrand = "PEPSI" if nameBrand == "PEPSI-COLA"
 16.         replace nameBrand = "T-MOBILE" if nameBrand == "T MOBILE"
 17.         replace nameBrand = "T-MOBILE" if nameBrand == "T (DEUTSCHE TELEKO
> M)"
 18.         replace nameBrand = "TENCENT" if nameBrand == "TENCENT (QQ)"
 19.         replace nameBrand = "UNITED HEALTHCARE" if nameBrand == "UNITEDHEA
> LTHCARE"
 20.         replace nameBrand = "UNITED HEALTHCARE" if nameBrand == "UNITEDHEA
> LTH"
 21.         replace nameBrand = "VOLKSWAGEN" if nameBrand == "VW (VOLKSWAGEN)"
 22. end

. 
. program readNationalAccountData
  1.         import excel using "$locationNatAccData/ValueAddedConstantPricesUS
> D.xlsx", firstrow clear
  2.         destring Wholesaleretail Manufacturing TotalValueAdded Year, force
>  replace
  3.         g ratio = Wholesaleretail/Manufacturing
  4.         g dist = Wholesaleretail/TotalValueAdded 
  5.         drop if Country == "" | Year==.
  6.         save ../output/nationalAccount.dta , replace
  7. end

. 
. main
set matsize ignored.
    Matrix sizes are no longer limited by c(matsize) in modern Statas.  Matrix sizes are now limited by flavor of Stata.  See limits for more details.
(set more preference recorded)
(set type preference recorded)
  [1]  (BASE)      "C:\Program Files\Stata16\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata16\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "C:\Users\bbronnen\ado\personal/"
  [5]  (PLUS)      "C:\Users\bbronnen\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "..\external"
  [1]  (BASE)      "C:\Program Files\Stata16\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata16\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "C:\Users\bbronnen\ado\personal/"
  [5]  (PLUS)      "C:\Users\bbronnen\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "..\external"
  [8]              "..\external\ado"
(9 vars, 1,500 obs)
(1,244 real changes made)
(0 real changes made)
(11 real changes made)
(1 observation deleted)
(note: file ../output/brandFinance.dta not found)
file ../output/brandFinance.dta saved
(4 vars, 1,500 obs)
(1,274 real changes made)
(34 real changes made)
(0 real changes made)
(0 observations deleted)
(note: file ../output/interBrand.dta not found)
file ../output/interBrand.dta saved

Duplicates in terms of all variables

(1,252 observations deleted)
(note: file ../output/crossWalk.dta not found)
file ../output/crossWalk.dta saved

Duplicates in terms of all variables

(1,343 observations deleted)

-------------------------------------------------------------------------------
merge specs          |
       matching type | 1:1
  mv's on match vars | none
  unmatched obs from | both
---------------------+---------------------------------------------------------
  master        file | ../output/interBrand.dta
                 obs |    157
                vars |      2
          match vars | nameBrand  (key)
  -------------------+---------------------------------------------------------
  using         file | ../output/crossWalk.dta
                 obs |    247
                vars |      2
          match vars | nameBrand  (key)
---------------------+---------------------------------------------------------
(note: variable nameBrand was str26, now str32 to accommodate using data's values)
result          file | ../output/interBrand.dta
                 obs |    319
                vars |      5  (including _merge)
         ------------+---------------------------------------------------------
              _merge |     72  obs only in master data                (code==1)
                     |    162  obs only in using data                 (code==2)
                     |     85  obs both in master and using data      (code==3)
-------------------------------------------------------------------------------

Duplicates in terms of all variables

(0 observations are duplicates)
(14 real changes made)
(1 real change made)
(2 real changes made)
(1 real change made)
(1 real change made)
(2 real changes made)
(0 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

Duplicates in terms of all variables

(0 observations are duplicates)
file ../output/crossWalk.dta saved
(11 vars, 12,500 obs)
Wholesaleretailtraderestaur: contains nonnumeric characters; replaced as double
(988 missing values generated)
ManufacturingISICD: contains nonnumeric characters; replaced as double
(981 missing values generated)
TotalValueAdded: contains nonnumeric characters; replaced as double
(938 missing values generated)
Year: all characters numeric; replaced as int
(1,031 missing values generated)
(988 missing values generated)
(0 observations deleted)
(note: file ../output/nationalAccount.dta not found)
file ../output/nationalAccount.dta saved

. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
.         
.         
. 
end of do-file
make.bat completed	
do 23-12-2021		
13:28:24,82		
